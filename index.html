<script>
  function berechne() {
    const erw = parseInt(document.getElementById("erwachsene").value) || 0;
    const kind = parseInt(document.getElementById("kinder").value) || 0;
    const einkommen = parseFloat(document.getElementById("einkommen").value) || 0;

    if (erw === 0) {
      alert("Bitte mindestens eine erwachsene Person angeben.");
      return;
    }

    const gewicht = 1 + (erw - 1) * 0.5 + kind * 0.3;
    const gewichtetesEinkommen = Math.round((einkommen * 1.8) / gewicht);

    document.getElementById("ergebnis").textContent =
      "Dein gewichtetes Haushaltseinkommen beträgt: " +
      gewichtetesEinkommen.toLocaleString("de-DE") + " €";

    // Senden an Google Apps Script Web-App
    fetch("https://script.google.com/macros/s/AKfycbyS7-E003fefy7Umu2NbPYokj1PUKcsmOWrdfmI-YHGsPuJN2mFFvMTzKEx7RqYYZbl4g/exec", {
      method: "POST",
      body: JSON.stringify({ gewichtetesEinkommen }),
      headers: {
        "Content-Type": "application/json",
      },
    })
    .then(response => response.text())
    .then(result => console.log("Erfolgreich gesendet:", result))
    .catch(error => console.error("Fehler beim Senden:", error));
  }
</script>
